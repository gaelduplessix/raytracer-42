#!/bin/bash

exec=`type -P qmake-qt4 || type -P qmake || echo "not found"`

if [ $exec == "not found" ]; then
    echo "Qt not found"
    exit
else
    $exec -project -nopwd FORMS="forms/raytracer.ui forms/clusterDialog.ui forms/launchServerDialog.ui forms/editMaterialDialog.ui forms/connectToServer.ui forms/Preferences.ui forms/About.ui" RESOURCES="ressources.qrc" QT+=xml QT+=network OBJECTS_DIR=./objects src/ LIBS="-lboost_serialization"
    make -C configure_options
    if ./configure_options/endian
    then
	$exec DEFINES=IS_BIG_ENDIAN
    else
	$exec
    fi
    echo "re:	clean all" >> Makefile
fi

