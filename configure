#!/bin/bash

exec=`type -P qmake-qt4 || type -P qmake || echo "not found"`

if [ $exec == "not found" ]; then
    echo "Qt not found"
    exit
else
    $exec -project -nopwd FORMS="raytracer.ui clusterDialog.ui launchServerDialog.ui" RESOURCES="ressources.qrc" src/
    make -C configure_options
    if ./configure_options/endian
    then
	$exec QT+=xml OBJECTS_DIR=./objects LIBS="-lSDL" DEFINES=IS_BIG_ENDIAN
    else
	$exec QT+=xml OBJECTS_DIR=./objects LIBS="-lSDL"

    fi
    echo "re:	clean all" >> Makefile
fi
